document.addEventListener("DOMContentLoaded",(function(){function e(){const e={navbarPreference:localStorage.getItem("special_navbar_preference"),themePreference:localStorage.getItem("theme")||"system",scrollPosition:window.scrollY};return sessionStorage.setItem("preservedState",JSON.stringify(e)),e}function t(){const e=sessionStorage.getItem("preservedState");if(e)try{const t=JSON.parse(e);document.body.hasAttribute("data-switch-navbar")&&t.navbarPreference&&localStorage.setItem("special_navbar_preference",t.navbarPreference),t.themePreference&&localStorage.setItem("theme",t.themePreference),sessionStorage.removeItem("preservedState")}catch(e){}}function n(e){const t=document.createElement("a");return t.href=e,t.hostname}function a(e){if(!e)return!1;if(e.startsWith("#"))return!1;if(e.startsWith("mailto:")||e.startsWith("tel:"))return!1;const t=window.location.hostname,a=n(e);return a===t||""===a}function o(){"true"===sessionStorage.getItem("pageIsTransitioning")&&(sessionStorage.removeItem("pageIsTransitioning"),document.body.style.opacity="0",setTimeout((function(){document.body.classList.add("page-entering"),document.body.style.opacity="1",setTimeout((function(){document.body.classList.remove("page-entering")}),500)}),10))}function i(t,n){e(),sessionStorage.setItem("pageIsTransitioning","true"),c.classList.add("visible"),setTimeout((function(){window.location.href=n}),400)}function r(){const e=document.getElementById("navbar-language-toggle");if(!e)return;const t=e.getAttribute("onclick"),n=t?t.match(/window\.location\.href=['"](.*)['"]/i):null,a=n?n[1]:null;a&&(e.onclick=function(e){return e.preventDefault(),i(e,a),!1})}function s(){document.querySelectorAll("a").forEach((e=>{const t=e.getAttribute("href");a(t)&&e.addEventListener("click",(function(e){e.ctrlKey||e.metaKey||e.shiftKey||(e.preventDefault(),i(e,t))}))})),r()}if(!function(){if(document.body.hasAttribute("data-page-transition"))return!0;const e=document.querySelector('meta[name="page-transition"]');return!(!e||"true"!==e.getAttribute("content"))}())return;const c=document.createElement("div");c.className="page-transition-overlay",document.body.appendChild(c);const l=document.createElement("style");l.textContent="\n    /* Page transition styles */\n    .page-transition-overlay {\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      background-color: var(--global-bg-color, #fff);\n      z-index: 9999;\n      opacity: 0;\n      visibility: hidden;\n      transition: opacity 0.4s ease;\n      pointer-events: none;\n      will-change: opacity, visibility;\n    }\n    \n    .page-transition-overlay.visible {\n      opacity: 1;\n      visibility: visible;\n      pointer-events: all;\n    }\n    \n    /* Theme support */\n    [data-theme='dark'] .page-transition-overlay,\n    [data-theme-setting='dark'] .page-transition-overlay {\n      background-color: var(--global-bg-color, #1e1e1e);\n    }\n    \n    /* Proper page entry animation */\n    body.page-entering {\n      animation: fadeIn 0.5s forwards;\n    }\n    \n    @keyframes fadeIn {\n      from { opacity: 0; }\n      to { opacity: 1; }\n    }\n    \n    /* Special tooltip for language button specifically */\n    #navbar-language-toggle {\n      position: relative;\n    }\n    \n    #navbar-language-toggle::after {\n      content: \"Switch language\";\n      position: absolute;\n      bottom: -30px;\n      left: 50%;\n      transform: translateX(-50%);\n      background-color: rgba(0, 0, 0, 0.8);\n      color: white;\n      padding: 5px 10px;\n      border-radius: 4px;\n      font-size: 12px;\n      white-space: nowrap;\n      opacity: 0;\n      visibility: hidden;\n      transition: opacity 0.3s ease, visibility 0.3s ease;\n      z-index: 1000;\n      pointer-events: none;\n    }\n    \n    #navbar-language-toggle:hover::after {\n      opacity: 1;\n      visibility: visible;\n    }\n    \n    /* Dark mode tooltip support */\n    [data-theme='dark'] #navbar-language-toggle::after,\n    [data-theme-setting='dark'] #navbar-language-toggle::after {\n      background-color: rgba(50, 50, 50, 0.95);\n    }\n  ",document.head.appendChild(l),t(),o(),s();new MutationObserver((function(e){e.forEach((function(e){if(e.addedNodes&&e.addedNodes.length>0)for(let t=0;t<e.addedNodes.length;t++){const n=e.addedNodes[t];if(1===n.nodeType)if("A"===n.tagName){const e=n.getAttribute("href");a(e)&&n.addEventListener("click",(function(t){t.ctrlKey||t.metaKey||t.shiftKey||(t.preventDefault(),i(t,e))}))}else{n.querySelectorAll("a").forEach((e=>{const t=e.getAttribute("href");a(t)&&e.addEventListener("click",(function(e){e.ctrlKey||e.metaKey||e.shiftKey||(e.preventDefault(),i(e,t))}))}))}}}))})).observe(document.body,{childList:!0,subtree:!0})}));